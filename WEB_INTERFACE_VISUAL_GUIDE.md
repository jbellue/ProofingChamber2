# Web Interface Visual Guide

## What You See in the Web Browser

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  ğŸ Proofing Chamber                                        â”‚
â”‚     Temperature Control System                              â”‚
â”‚                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Current Status                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Temperature   â”‚  Current Screen  â”‚      Mode        â”‚  â”‚
â”‚  â”‚    25.5Â°C     â”‚      Menu        â”‚   Off âš«          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Virtual Controls                                           â”‚
â”‚  These buttons simulate physical interface interactions     â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚  â¬†ï¸ Up   â”‚  â”‚ â¬‡ï¸ Down  â”‚  â”‚ âœ“ Select â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Quick Actions (Legacy)                                     â”‚
â”‚  Note: These may not work correctly. Use Virtual Controls  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ ğŸ”¥ Start Heating â”‚  â”‚    â¸ï¸ Stop      â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Temperature Settings                                       â”‚
â”‚  ... (existing settings interface) ...                     â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Usage Scenarios

### Scenario 1: Starting Proofing from Web

**Initial State:**
```
Current Status
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Temperature   â”‚  Current Screen  â”‚      Mode        â”‚
â”‚    22.0Â°C     â”‚      Menu        â”‚   Off âš«          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**User Actions:**
1. Click "Down" 3 times to scroll menu
2. Click "Select" to choose "Mettre en pousse"

**Result After ~2 Seconds:**
```
Current Status
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Temperature   â”‚  Current Screen  â”‚      Mode        â”‚
â”‚    22.2Â°C     â”‚    Proofing      â”‚ Heating ğŸ”´       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â±ï¸ Proofing: 5s elapsed
```

**What the Physical Display Shows:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mettre en     â”‚
â”‚    pousse      â”‚
â”‚                â”‚
â”‚   25.5Â°C       â”‚
â”‚   [Graph]      â”‚
â”‚   00:00:05     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Both match!** âœ…

---

### Scenario 2: Navigating Settings

**User Actions:**
1. Click "Down" to scroll to "RÃ©glages"
2. Click "Select" to enter settings
3. Click "Down" to "Chaud"
4. Click "Select" to enter hot settings

**Web Shows:**
```
Current Screen: Menu
â†“
Current Screen: Menu
â†“  
Current Screen: Menu
â†“
Current Screen: Menu
```

**Physical Display Shows:**
```
Settings Menu
> RÃ©glages chaud
  RÃ©glages froid
  ...
```

**Web mirrors the navigation!** User knows where they are.

---

### Scenario 3: Stopping Active Proofing

**Initial State:**
```
Current Status
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Temperature   â”‚  Current Screen  â”‚      Mode        â”‚
â”‚    28.5Â°C     â”‚    Proofing      â”‚ Heating ğŸ”´       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â±ï¸ Proofing: 15m 30s elapsed
```

**User Action:**
Click "Select" button

**Result:**
```
Current Status
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Temperature   â”‚  Current Screen  â”‚      Mode        â”‚
â”‚    28.5Â°C     â”‚      Menu        â”‚   Off âš«          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Physical Display:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Menu Principal â”‚
â”‚  > Mettre en   â”‚
â”‚    pousse      â”‚
â”‚    Pousser     â”‚
â”‚    dans...     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Back to menu on both!** âœ…

---

## Button Functions

### Virtual Controls

**â¬†ï¸ Up Button:**
- Sends: `POST /api/input/encoder?steps=-1`
- Effect: Counter-clockwise encoder turn
- In Menu: Scrolls up
- In Value Edit: Decreases value

**â¬‡ï¸ Down Button:**
- Sends: `POST /api/input/encoder?steps=1`
- Effect: Clockwise encoder turn
- In Menu: Scrolls down
- In Value Edit: Increases value

**âœ“ Select Button:**
- Sends: `POST /api/input/button`
- Effect: Button press
- In Menu: Selects item, enters submenu
- During Operation: Cancels, returns to menu
- In Edit: Confirms value

### Legacy Quick Actions

**ğŸ”¥ Start Heating:**
- Old approach: `POST /api/mode?mode=heating`
- May not work reliably
- Use Virtual Controls instead

**â¸ï¸ Stop:**
- Old approach: `POST /api/mode?mode=off`
- May not work reliably
- Use Virtual Controls instead

---

## Status Display Elements

### Temperature
- Shows current temperature from DS18B20 sensor
- Updates every 2 seconds
- Example: `25.5Â°C`

### Current Screen
- **NEW!** Shows active screen name
- Updates every 2 seconds
- Possible values:
  - `Menu` - Main menu or submenus
  - `Proofing` - Active proofing with timer
  - `Cooling` - Active cooling with countdown
  - `Initialization` - During startup
  - `Unknown` - Fallback

### Mode
- Shows temperature control mode
- Values:
  - `Off âš«` - No heating or cooling
  - `Heating ğŸ”´` - Heater active (pulsing animation)
  - `Cooling ğŸ”µ` - Cooler active (pulsing animation)

### Timing Info (When Active)
- **During Proofing:**
  - `â±ï¸ Proofing: 15m 30s elapsed`
  
- **During Cooling:**
  - `ğŸ• Cooling: 2h 15m until proofing starts`
  - `Starts at: 2/3/2026, 6:00:00 PM`

---

## Interaction Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚  1. User opens web browser                              â”‚
â”‚     â†’ Sees "Current Screen: Menu"                       â”‚
â”‚                                                         â”‚
â”‚  2. User clicks "Down" 3 times                          â”‚
â”‚     â†’ Each click: POST /api/input/encoder?steps=1       â”‚
â”‚     â†’ Menu scrolls on physical display                  â”‚
â”‚     â†’ Web still shows "Current Screen: Menu"            â”‚
â”‚                                                         â”‚
â”‚  3. User clicks "Select"                                â”‚
â”‚     â†’ POST /api/input/button                            â”‚
â”‚     â†’ Menu handles selection                            â”‚
â”‚     â†’ Transitions to ProofingController                 â”‚
â”‚     â†’ Physical display shows proofing screen            â”‚
â”‚                                                         â”‚
â”‚  4. Web polls (2 seconds later)                         â”‚
â”‚     â†’ GET /api/display/state                            â”‚
â”‚     â†’ Returns: {"screen":"Proofing"}                    â”‚
â”‚     â†’ Web shows "Current Screen: Proofing"              â”‚
â”‚                                                         â”‚
â”‚  5. User clicks "Select" to stop                        â”‚
â”‚     â†’ POST /api/input/button                            â”‚
â”‚     â†’ ProofingController exits                          â”‚
â”‚     â†’ Returns to Menu                                   â”‚
â”‚     â†’ Physical display shows menu                       â”‚
â”‚                                                         â”‚
â”‚  6. Web polls (2 seconds later)                         â”‚
â”‚     â†’ GET /api/display/state                            â”‚
â”‚     â†’ Returns: {"screen":"Menu"}                        â”‚
â”‚     â†’ Web shows "Current Screen: Menu"                  â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technical Details

### Polling Frequency
- Status updates: Every 2 seconds
- Display state: Every 2 seconds (same request)
- No WebSocket (could be added later)

### Input Processing
- Virtual inputs queued immediately
- Processed in next update loop iteration
- Typically < 100ms latency
- Web refreshes within 2 seconds

### Screen Synchronization
- Web shows what device shows
- 2 second max delay for web to update
- Device state always authoritative
- No way to get out of sync

---

## Troubleshooting

### Web Shows Wrong Screen
**Symptom:** Web says "Menu" but device shows "Proofing"
**Cause:** Polling delay (max 2 seconds)
**Solution:** Wait a moment, will auto-update

### Buttons Don't Work
**Symptom:** Clicking buttons does nothing
**Possible Causes:**
1. Device not connected to WiFi â†’ Check IP address
2. Wrong IP address â†’ Verify from device display
3. Network issue â†’ Check connection

### Display Goes Black
**This should not happen with virtual controls!**
- If it does, report as bug
- Old quick action buttons might still have this issue
- Use virtual controls instead

---

## Comparison: Old vs New

### Old Approach (Broken)
```
Web Browser
     â†“
 [Start Heating]
     â†“
POST /api/mode?mode=heating
     â†“
tempController->setMode(HEATING)
     â†“
Heating starts âœ“
Physical display unchanged âœ—
```

### New Approach (Working)
```
Web Browser
     â†“
  [â¬‡ï¸ Down] [âœ“ Select]
     â†“
POST /api/input/encoder
POST /api/input/button
     â†“
InputManager queues inputs
     â†“
Update loop processes
     â†“
Menu handles inputs
     â†“
Transitions to ProofingController âœ“
Physical display updates âœ“
     â†‘
     â”‚
  GET /api/display/state
     â”‚
Web updates âœ“
```

---

## Summary

The new web interface is a **true display mirror with virtual remote control**:

âœ… Shows what the physical display shows ("Current Screen")
âœ… Sends virtual inputs (Up/Down/Select buttons)
âœ… Device processes inputs naturally
âœ… Everything stays synchronized
âœ… Simple and robust

Use the **Virtual Controls** for reliable operation. The Legacy Quick Actions are kept for convenience but may not work correctly in all situations.
